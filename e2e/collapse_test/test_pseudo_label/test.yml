query: >
  MATCH (n:P) WITH COLLECT(n) AS nodes
  CALL collapse.collapse(nodes, ['Edge'], ['T'])
  YIELD from_vertex, path, to_vertex
  RETURN from_vertex, nodes(path) AS path, to_vertex

output:
  - from_vertex:
      labels:
      - P
      properties:
        id: p1
    path:
      - labels:
        - S
        properties:
          id: s1
      - labels:
        - T
        properties:
          id: t
      - labels:
        - S
        properties:
          id: s2
    to_vertex:
      labels:
      - P
      properties:
        id: p2
