#                                        +-------+
#                                        |  C:c  |
#                                        +-------+
#                                    /------- -------\
#                            --------                 -------
#                        +-------+                       +-------+
#                        |  P:p1 |                       |  P:p2 |
#                        +-------+                       +-------+
#                         /--  -\                          /----\
#                     /---       --\                   /---      ---\
#                   --              --               --              ---
#              +-------+          +-------+      +-------+          +-------+
#              |  S:s1 |          |  S:s2 |      |  S:s3 |          |  S:s4 |
#              +-------+          +-------+      +-------+          +-------+
#                                    |               |
#                                    +---------------+

query: >
  MATCH (n:P) WITH COLLECT(n) AS nodes
  CALL collapse.collapse(nodes, ["Edge"])
  YIELD from_vertex, path, to_vertex
  RETURN from_vertex, nodes(path) AS path, to_vertex

output:
  - from_vertex:
      labels:
      - P
      properties:
        id: p2
    path:
    - labels:
      - S
      properties:
        id: s3
    - labels:
      - S
      properties:
        id: s2
    to_vertex:
      labels:
      - P
      properties:
        id: p1
